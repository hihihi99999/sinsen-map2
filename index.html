<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Á•ûÊ≥âÁî∫„Ç®„É™„Ç¢„É¨„Çπ„Éà„É©„É≥„Éû„ÉÉ„Éó</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans JP', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: #f5f5f5;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .api-status {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 10px;
            text-align: center;
            font-size: 14px;
        }
        
        .container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        #map {
            flex: 1;
            height: 100%;
            background-color: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 16px;
        }
        
        .sidebar {
            width: 350px;
            background-color: white;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        
        .legend {
            padding: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .legend-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            font-size: 16px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            padding: 5px;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        
        .legend-item:hover {
            background-color: #f8f9fa;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 10px;
            border: 2px solid #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .restaurant-list {
            padding: 20px;
        }
        
        .restaurant-list-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            font-size: 16px;
        }
        
        .restaurant-item {
            background-color: #fafafa;
            margin-bottom: 12px;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .restaurant-item:hover {
            background-color: #e3f2fd;
            transform: translateX(5px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .restaurant-name {
            font-weight: bold;
            font-size: 15px;
            margin-bottom: 5px;
            color: #333;
        }
        
        .restaurant-category {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            color: white;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .restaurant-feature {
            font-size: 13px;
            color: #666;
            margin-bottom: 5px;
            line-height: 1.4;
        }
        
        .restaurant-address {
            font-size: 12px;
            color: #888;
            margin-bottom: 5px;
        }
        
        .restaurant-link {
            font-size: 11px;
            margin-top: 5px;
        }
        
        .restaurant-link a {
            color: #1976d2;
            text-decoration: none;
            display: inline-block;
            padding: 2px 6px;
            background-color: #e3f2fd;
            border-radius: 10px;
            transition: all 0.2s;
        }
        
        .restaurant-link a:hover {
            background-color: #1976d2;
            color: white;
            text-decoration: none;
        }
        
        .filter-section {
            padding: 20px;
            border-bottom: 1px solid #eee;
            background-color: #f8f9fa;
        }
        
        .filter-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            font-size: 16px;
        }
        
        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .filter-option {
            background-color: #e1f5fe;
            color: #0277bd;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            font-weight: bold;
        }
        
        .filter-option:hover {
            background-color: #b3e5fc;
        }
        
        .filter-option.active {
            background-color: #1976d2;
            color: white;
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                max-height: 40vh;
                order: 2;
            }
            
            #map {
                height: 60vh;
                order: 1;
            }
            
            .header h1 {
                font-size: 20px;
            }
            
            .header p {
                font-size: 12px;
            }
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            color: #666;
        }

        .error-message {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            margin: 20px;
            border-radius: 5px;
            text-align: center;
        }

        .search-section {
            padding: 20px;
            border-bottom: 1px solid #eee;
            background-color: #ffffff;
        }

        .search-input {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e1f5fe;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            border-color: #1976d2;
        }

        .search-input::placeholder {
            color: #999;
        }

        .stats-section {
            padding: 15px 20px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #eee;
            text-align: center;
        }

        .stats-text {
            font-size: 14px;
            color: #666;
        }

        .distance-info {
            font-size: 11px;
            color: #888;
            margin-top: 3px;
            font-style: italic;
        }

        .price-range {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 10px;
            margin-left: 5px;
            background-color: #fff3cd;
            color: #856404;
            font-weight: bold;
        }

        .restaurant-item.highlighted {
            background-color: #e3f2fd !important;
            transform: translateX(5px) !important;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
        }

        .no-results {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .no-results h3 {
            margin-bottom: 10px;
            font-size: 18px;
        }

        .favorite-btn {
            background: none;
            border: none;
            font-size: 16px;
            cursor: pointer;
            color: #ccc;
            transition: color 0.3s;
            float: right;
            margin-top: -5px;
        }

        .favorite-btn.active {
            color: #ff6b6b;
        }

        .favorite-btn:hover {
            color: #ff8a80;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üçΩÔ∏è Á•ûÊ≥âÁî∫„Ç®„É™„Ç¢„É¨„Çπ„Éà„É©„É≥„Éû„ÉÉ„Éó</h1>
        <p>ÁæéÂë≥„Åó„ÅÑ„ÅäÂ∫ó„ÇíË¶ã„Å§„Åë„Çà„ÅÜÔºÅ „ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶Ë©≥Á¥∞ÊÉÖÂ†±„ÇíÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô</p>
    </div>

    <div class="api-status" id="api-status">
        üîß Google Maps API„ÅÆË™≠„ÅøËæº„ÅøÁä∂Ê≥Å„ÇíÁ¢∫Ë™ç„Åó„Å¶„ÅÑ„Åæ„Åô...
    </div>
    
    <div class="container">
        <div class="sidebar">
            <div class="search-section">
                <input type="text" id="search-input" class="search-input" placeholder="üîç Â∫óÂêç„ÄÅÁâπÂæ¥„ÄÅ‰ΩèÊâÄ„ÅßÊ§úÁ¥¢...">
            </div>

            <div class="stats-section">
                <div class="stats-text" id="stats-text">ÂÖ®17‰ª∂„ÅÆ„É¨„Çπ„Éà„É©„É≥</div>
            </div>
            
            <div class="filter-section">
                <div class="filter-title">üîç „Ç´„ÉÜ„Ç¥„É™„Éº„Éï„Ç£„É´„Çø„Éº</div>
                <div class="filter-options" id="filter-options">
                    <!-- „Éï„Ç£„É´„Çø„Éº„Ç™„Éó„Ç∑„Éß„É≥„ÅØJavaScript„ÅßÂãïÁöÑ„Å´ËøΩÂä† -->
                </div>
            </div>
            
            <div class="legend">
                <div class="legend-title">üé® „Ç∏„É£„É≥„É´Âà•Ëâ≤ÂàÜ„Åë</div>
                <div id="legend-content">
                    <!-- Âá°‰æã„ÅØJavaScript„ÅßÂãïÁöÑ„Å´ËøΩÂä† -->
                </div>
            </div>
            
            <div class="restaurant-list">
                <div class="restaurant-list-title">üìç „É¨„Çπ„Éà„É©„É≥‰∏ÄË¶ß</div>
                <div id="restaurant-list">
                    <div class="loading">„É¨„Çπ„Éà„É©„É≥„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>
                </div>
            </div>
        </div>
        
        <div id="map">
            <div>Google Maps„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>
        </div>
    </div>
    
    <script>
        // Á•ûÊ≥âÈßÖ„ÅÆÂ∫ßÊ®ôÔºàÂ§âÊõ¥Á¶ÅÊ≠¢Ôºâ
        const KAMISENU_LAT = 35.6563;
        const KAMISENU_LON = 139.6963;
        
        // Á•ûÊ≥âÁî∫„Ç®„É™„Ç¢„ÅÆ„É¨„Çπ„Éà„É©„É≥„Éá„Éº„ÇøÔºàÁ∑ØÂ∫¶ÁµåÂ∫¶Â§âÊõ¥Á¶ÅÊ≠¢Ôºâ
        const restaurants = [
            {"Â∫óÂêç":"Á•ûÊ≥â„Éõ„É´„É¢„É≥","ÁâπÂæ¥":"„Åü„Åπ„É≠„Ç∞ÔºëÔºêÔºêÂêçÂ∫ó„ÅÆÂ∏∏ÈÄ£Êßò ‰∫∫Ê∞ó„ÅÆ„Éõ„É´„É¢„É≥ÁÑºËÇâ","‰ΩèÊâÄ":"Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫Á•ûÊ≥âÁî∫12-4","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"http://www.sanbyakuya.com/","Ê•≠ÊÖã":"ÁÑºËÇâ Â±ÖÈÖíÂ±ã","Á∑ØÂ∫¶":35.65595273552802,"ÁµåÂ∫¶":139.6927069966564},
            {"Â∫óÂêç":"„Åã„Åó„Çè„Éì„Çπ„Éà„É≠„Éê„É≥„Éê„É≥","ÁâπÂæ¥":"„Ç≥„Çπ„ÉëÊäúÁæ§„ÅÆ„Éì„Çπ„Éà„É≠„ÇíË£èÊ∏ãË∞∑„Åß","‰ΩèÊâÄ":"Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫Á•ûÊ≥âÁî∫2-8","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"","Ê•≠ÊÖã":"„Éì„Çπ„Éà„É≠ Â±ÖÈÖíÂ±ã","Á∑ØÂ∫¶":35.65761828074336, "ÁµåÂ∫¶":139.6937608389854},
            {"Â∫óÂêç":"È∫∫„ÅÆÂùä Á†¶","ÁâπÂæ¥":"„É©„Éº„É°„É≥Â±ã„Åï„Çì„Å™„Åå„Çâ„ÄÅ„Åä„Å´„Åé„Çä„ÅåÊúâÂêç„Å™„ÅäÂ∫ó ÊòéÂ§™„ÇΩ„Éº„Çπ„Å´„Å§„Åë„Çã„Åä„Å´„Åé„Çä„Åå‚óé","‰ΩèÊâÄ":"Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫Á•ûÊ≥âÁî∫ÔºíÔºê‚àíÔºíÔºì „Çª„É´„É™„Ç¢„É≥„Éì„É´ ÔºëÈöé","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"","Ê•≠ÊÖã":"„É©„Éº„É°„É≥ „Åä„Å´„Åé„Çä","Á∑ØÂ∫¶":35.657268015982396, "ÁµåÂ∫¶":139.69138938316314},
            {"Â∫óÂêç":"Êµ∑ÈÆÆÂá¶ Âêë‰∫ï","ÁâπÂæ¥":"„Åì„ÅÆÂÄ§ÊÆµ„Åß„Åì„ÅÆÊµ∑ÈÆÆ‰∏º„Åå„Åü„Åπ„Çâ„Çå„Çã„Å®„ÅØ„Éª„Éª„Éª„ÅäËå∂Êº¨„Åë„ÇÇÊúÄÂπ∏","‰ΩèÊâÄ":"„Äí150-0045 Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫Á•ûÊ≥âÁî∫ÔºëÔºï‚àíÔºñ","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"https://tabelog.com/tokyo/A1303/A130301/13265340/","Ê•≠ÊÖã":"Êµ∑ÈÆÆ","Á∑ØÂ∫¶":35.65705577260045, "ÁµåÂ∫¶":139.69268429665664},
            {"Â∫óÂêç":"„ÅÜ„Åï„Åé","ÁâπÂæ¥":"ÈÉΩÂÜÖ‰∏ÄÁæéÂë≥„Åó„ÅÑ„Å®„ÅÑ„ÅÜ‰∫∫„ÇÇ„ÅÑ„ÇãÊãÖ„ÄÖÈ∫∫„ÅÆ„ÅäÂ∫ó","‰ΩèÊâÄ":"„Äí150-0045 Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫Á•ûÊ≥âÁî∫Ôºò‚àíÔºëÔºì","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"","Ê•≠ÊÖã":"„É©„Éº„É°„É≥ ÊãÖ„ÄÖÈ∫∫","Á∑ØÂ∫¶":35.65608766943281,"ÁµåÂ∫¶":139.69341380880965},
            {"Â∫óÂêç":"„ÉÑ„Éº„Éî„Éº„Çπ","ÁâπÂæ¥":"„Åö„Å£„Å®Ë°å„Åç„Åü„Åã„Å£„Åü„ÅäÂ∫ó„ÅÆ‰ª£Ë°®Ê†º","‰ΩèÊâÄ":"„Äí150-0044 Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫ÂÜÜÂ±±Áî∫ÔºíÔºê‚àíÔºï „Ç∞„É©„É≥„Éâ„Éç„ÇπÊ∏ãË∞∑ 2F","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫Âë®Ëæ∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"https://tabelog.com/tokyo/A1303/A130301/13292012/","Ê•≠ÊÖã":"Â±ÖÈÖíÂ±ã","Á∑ØÂ∫¶":35.6562542644997,"ÁµåÂ∫¶":139.6946336038223},
            {"Â∫óÂêç":"8jikai_shibuya","ÁâπÂæ¥":"„ÇØ„É©„Ç§„Éä„Éº¬•250ÂÜÜ„ÅßÈ£≤„ÇÅ„Çãbar Èö†„ÇåÂÆ∂bar","‰ΩèÊâÄ":"Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫ÂÜÜÂ±±Áî∫Ôºë‚àíÔºëÔºñ „Åó„Å∂„Åæ„Çã È§® 3F","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫Âë®Ëæ∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"https://www.instagram.com/8jikai_shibuya/","Ê•≠ÊÖã":"bar","Á∑ØÂ∫¶":35.65980240042474,"ÁµåÂ∫¶": 139.69517293898562},
            {"Â∫óÂêç":"Ê•ΩÊ§ø Ôºà„Çâ„Åè„Å°„ÇìÔºâ","ÁâπÂæ¥":"„Ç≥„Çπ„Éë„Åå„ÅÑ„ÅÑ„ÅÆ„Å´„Éï„Éº„Éâ„ÇÇ„Éâ„É™„É≥„ÇØ„ÇÇ„Åã„Å™„Çä„ÅÑ„ÅÑ„ÄÇ","‰ΩèÊâÄ":"Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫ÂÜÜÂ±±Áî∫ÔºíÔºì‚àíÔºëÔºê Ê∏ãË∞∑Ôº°Ôº¥„Éì„É´ 1F","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫Âë®Ëæ∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"https://www.instagram.com/rakucin01?utm_source=ig_profile_share&igshid=7hesla6grzib","Ê•≠ÊÖã":"ÂíåÈ£üÂ±ÖÈÖíÂ±ã","Á∑ØÂ∫¶":35.65653602266121,"ÁµåÂ∫¶":139.69403980936806},
            {"Â∫óÂêç":"„Åä„Åï„Åã„Å™„ÇÑÈ≠öÈ≠öÊ®© Á•ûÊ≥âÂ∫ó","ÁâπÂæ¥":"È≠ö‰ªãÈ°û„ÅåÊñ∞ÈÆÆ„Å®Â•ΩË©ï„Åß„ÄÅ„Åù„ÅÆÊó•„ÅÆ„Åä„Åô„Åô„ÇÅ„ÅÆÈ≠ö‰ªãÈ°û„ÅÆÊ°àÂÜÖ„Åå„ÅÇ„ÇäÔºÅ","‰ΩèÊâÄ":"Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫ÂÜÜÂ±±Áî∫ÔºíÔºí‚àíÔºëÔºî Â°ô„Éì„É´ 1F","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫Âë®Ëæ∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"https://www.instagram.com/totogen_shinsen/","Ê•≠ÊÖã":"Êµ∑ÈÆÆ Â±ÖÈÖíÂ±ã","Á∑ØÂ∫¶":35.65662092967477,"ÁµåÂ∫¶":139.6941755813143},
            {"Â∫óÂêç":"„Åç„Å®„Åç„Å®","ÁâπÂæ¥":"ÂØåÂ±±„ÅÆÂé≥ÈÅ∏È£üÊùê√óÂ±ÖÈÖíÂ±ã 4000ÔΩû","‰ΩèÊâÄ":"„Äí150-0044 Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫ÂÜÜÂ±±Áî∫Ôºï‚àíÔºëÔºò ÈÅìÁéÑÂùÇ„Çπ„ÇØ„Ç®„Ç¢ B1F","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫Âë®Ëæ∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"https://www.instagram.com/shibuya.kitokito/","Ê•≠ÊÖã":"Â±ÖÈÖíÂ±ã","Á∑ØÂ∫¶":35.65727658119112,"ÁµåÂ∫¶":139.69560605432753},
            {"Â∫óÂêç":"Sta.","ÁâπÂæ¥":"Ê∏ãË∞∑ÁæéÂÆπÂÆ§„Åã„Å®ÈñìÈÅï„Åà„Çã„Åè„Çâ„ÅÑ„ÅäÊ¥íËêΩ„Å™ÂíåÈ£üÂ±ã„Åï„Çì Êòº1500ÔΩû Â§ú6000ÔΩû","‰ΩèÊâÄ":"150-0044 Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫ÂÜÜÂ±±Áî∫ÔºëÔºë‚àíÔºó","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫Âë®Ëæ∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"","Ê•≠ÊÖã":"ÂíåÈ£ü „Ç∞„É´„ÉÜ„É≥„Éï„É™„Éº","Á∑ØÂ∫¶":35.65890344140431,"ÁµåÂ∫¶":139.69393079665664},
            {"Â∫óÂêç":"„ÉØ„Ç§„É≥ÈÖíÂ†¥„ÄÄUiUi","ÁâπÂæ¥":"Ë£èÊ∏ãÈÄö„Çä„Å´„ÅÇ„Çã „ÅäÊ¥íËêΩ„Å™Â±ÖÈÖíÂ±ã Âçä„ÉÜ„É©„ÇπÂ∏≠üëçÔ∏è 4000ÔΩû","‰ΩèÊâÄ":"„Äí150-0044 Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫ÂÜÜÂ±±Áî∫ÔºíÔºì‚àíÔºô Âπ≥‰∫ï„Éì„É´","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫Âë®Ëæ∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"https://www.instagram.com/uiui_shibuya/","Ê•≠ÊÖã":"„Éì„Çπ„Éà„É≠ Â±ÖÈÖíÂ±ã","Á∑ØÂ∫¶":35.65665971691215,"ÁµåÂ∫¶":139.6940360966565},
            {"Â∫óÂêç":"IGOR COSY Á•ûÊ≥â","ÁâπÂæ¥":"ÂíåÈ£ü√ó„Éï„É¨„É≥„ÉÅ ÊñôÁêÜ„ÅÆ‰∏≠„Åß„ÄêÈõ≤‰∏π„ÅÆ„Åõ„Ç∑„É•„Éº„Éû„Ç§„Äë„ÅØÂøÖÈ£üÔºÅ¬•4,000~","‰ΩèÊâÄ":"Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫ÂÜÜÂ±±Áî∫18-6 Ëó§Áî∞„Éì„É´ 1F","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫Âë®Ëæ∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"https://tabelog.com/tokyo/A1303/A130301/13254085/","Ê•≠ÊÖã":"Â±ÖÈÖíÂ±ã ÂíåÈ£ü√ó„Éï„É¨„É≥„ÉÅ","Á∑ØÂ∫¶":35.65717035093698,"ÁµåÂ∫¶":139.6941069408343},
            {"Â∫óÂêç":"ÂÆöÈ£ü„Çµ„Éà„Ç¶","ÁâπÂæ¥":"Èö†„ÇåÂÆöÈ£üÂ±ã","‰ΩèÊâÄ":"„Äí150-0044 Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫ÂÜÜÂ±±Áî∫ÔºëÔºì‚àíÔºëÔºô „É°„Çæ„É≥ Ëã•Êûó B103","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫Âë®Ëæ∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"","Ê•≠ÊÖã":"ÂÆöÈ£üÂ±ã","Á∑ØÂ∫¶":35.65833672116582, "ÁµåÂ∫¶":139.69374886966966},
            {"Â∫óÂêç":"neo Ôºà„Éç„Éº„Ç™Ôºâ","ÁâπÂæ¥":"Â≠£ÁØÄ„Åî„Å®„Å´Â§â„Çè„ÇãÁµ∂ÂìÅÊñôÁêÜÔºã„ÉØ„Ç§„É≥ „ÅÑ„Å§ÈÄö„Å£„Å¶„ÇÇ„ÄÅ‰∫∫„Åß„Åî„Å£„ÅüËøî„Åó„Å¶„ÅÑ„Çã‰∫∫Ê∞óÂ∫ó","‰ΩèÊâÄ":"Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫ÂÜÜÂ±±Áî∫15-6","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫Âë®Ëæ∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"https://tabelog.com/tokyo/A1303/A130301/13262588/","Ê•≠ÊÖã":"Á´ã„Å°È£≤„Åø „Éï„É¨„É≥„ÉÅ","Á∑ØÂ∫¶":35.65754956347526,"ÁµåÂ∫¶":139.69437038131446},
            {"Â∫óÂêç":"Â±ÖÈÖíÂ±ã„Åô„Åø„Çå","ÁâπÂæ¥":"Á•ûÊ≥â„ÅÆ„Äé„ÇÑ„Åô„ÅÜ„Åæ„Äè„ÅÆ„ÅäÂ∫óÔºÅÁîü„Éì„Éº„É´130ÂÜÜ„Çµ„ÉØ„Éº„Éè„Ç§„Éú„Éº„É´100ÂÜÜÊñôÁêÜ290ÂÜÜ„Äú„ÅÆÊøÄÂÆâÂ±ÖÈÖíÂ±ã","‰ΩèÊâÄ":"Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫ÂÜÜÂ±±Áî∫Ôºñ‚àíÔºí","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫Âë®Ëæ∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"https://tabelog.com/tokyo/A1303/A130301/13135923/","Ê•≠ÊÖã":"Â±ÖÈÖíÂ±ã","Á∑ØÂ∫¶":35.65763170150196,"ÁµåÂ∫¶":139.69502977092523},
            {"Â∫óÂêç":"„Åü„ÇÇ„ÅÑ„ÇÑ„Çì„Åõ Ê∏ãË∞∑Â∫ó","ÁâπÂæ¥":"Á•ûÊ≥â„ÅÆ„Äé„ÇÑ„Åô„ÅÜ„Åæ„Äè„ÅÆ„ÅäÂ∫óÔºÅ¬•2,000~ ! ÂÆÆÂ¥é„ÅÆÁîüÁî£ËÄÖ„Åã„ÇâÁõ¥Êé•‰ªïÂÖ•„Çå„Åü„ÄÅËá™ÊÖ¢„ÅÆÁ¥†Êùê„Çí‰Ωø„Å£„Åü„Åì„Å†„Çè„Çä„ÅÆ‰πùÂ∑û„ÉªÂÆÆÂ¥é„ÅÆÈÉ∑ÂúüÊñôÁêÜ„ÇíÊ•Ω„Åó„ÇÅ„Çã„ÄÅÂ±ÖÂøÉÂú∞„ÅÆ„Çà„ÅÑÂ±ÖÈÖíÂ±ãÂ∫ó„ÄÇ","‰ΩèÊâÄ":"Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫Á•ûÊ≥âÁî∫ÔºëÔºê‚àíÔºëÔºê VORTÊ∏ãË∞∑Á•ûÊ≥â„Éì„É´ 1F","„Ç®„É™„Ç¢":"Á•ûÊ≥âÁî∫Âë®Ëæ∫","„Ç¢„Ç´„Ç¶„É≥„Éà":"https://tamoiyanse.net/","Ê•≠ÊÖã":"Â±ÖÈÖíÂ±ã","Á∑ØÂ∫¶":35.65543621878233,"ÁµåÂ∫¶":139.69261741199844}
        ];
        
        // „Ç´„ÉÜ„Ç¥„É™„ÇíË®≠ÂÆö„Åô„ÇãÈñ¢Êï∞
        function categorizeGenre(genre) {
            if (genre.includes('„Åù„Å∞')) {
                return '„Åù„Å∞';
            } else if (genre.includes('„É©„Éº„É°„É≥') || genre.includes('ÊãÖ„ÄÖÈ∫∫')) {
                return '„É©„Éº„É°„É≥';
            } else if (genre.includes('„Ç´„É¨„Éº')) {
                return '„Ç´„É¨„Éº';
            } else if (genre.includes('„Éì„Çπ„Éà„É≠') || genre.includes('„Éï„É¨„É≥„ÉÅ')) {
                return '„Éì„Çπ„Éà„É≠„Éª„Éï„É¨„É≥„ÉÅ';
            } else if (genre.includes('Êµ∑ÈÆÆ')) {
                return 'Êµ∑ÈÆÆ';
            } else if (genre.toLowerCase().includes('bar') || genre.includes('„Ç∑„Éº„Ç∑„É£')) {
                return '„Éê„Éº„Éª„Ç´„Éï„Çß';
            } else if (genre.includes('ÁÑºËÇâ')) {
                return 'ÁÑºËÇâ';
            } else if (genre.includes('ÂíåÈ£ü') && genre.includes('Â±ÖÈÖíÂ±ã')) {
                return 'ÂíåÈ£üÂ±ÖÈÖíÂ±ã';
            } else if (genre.includes('Â±ÖÈÖíÂ±ã')) {
                return 'Â±ÖÈÖíÂ±ã';
            } else if (genre.includes('ÂíåÈ£ü')) {
                return 'ÂíåÈ£ü';
            } else if (genre.includes('ÂÆöÈ£ü')) {
                return 'ÂÆöÈ£ü';
            } else {
                return '„Åù„ÅÆ‰ªñ';
            }
        }
        
        // „Ç´„ÉÜ„Ç¥„É™„Åî„Å®„ÅÆËâ≤„ÇíÂÆöÁæ©
        const categoryColors = {
            '„Åù„Å∞': '#2ecc71',
            '„É©„Éº„É°„É≥': '#1e8449', 
            '„Ç´„É¨„Éº': '#f39c12',
            '„Éì„Çπ„Éà„É≠„Éª„Éï„É¨„É≥„ÉÅ': '#3498db',
            'Êµ∑ÈÆÆ': '#16a085',
            '„Éê„Éº„Éª„Ç´„Éï„Çß': '#9b59b6',
            'ÁÑºËÇâ': '#e74c3c',
            'ÂíåÈ£üÂ±ÖÈÖíÂ±ã': '#a93226',
            'Â±ÖÈÖíÂ±ã': '#e57373',
            'ÂíåÈ£ü': '#795548',
            'ÂÆöÈ£ü': '#1a237e',
            '„Åù„ÅÆ‰ªñ': '#7f8c8d'
        };
        
        // „É¨„Çπ„Éà„É©„É≥„Éá„Éº„Çø„Å´„Ç´„ÉÜ„Ç¥„É™„ÇíËøΩÂä†
        restaurants.forEach(restaurant => {
            restaurant.„Ç´„ÉÜ„Ç¥„É™ = categorizeGenre(restaurant.Ê•≠ÊÖã);
            restaurant.Ë∑ùÈõ¢ = calculateDistance(restaurant.Á∑ØÂ∫¶, restaurant.ÁµåÂ∫¶);
            restaurant.‰æ°Ê†ºÂ∏Ø = estimatePriceRange(restaurant.ÁâπÂæ¥);
        });
        
        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞
        let map;
        let markers = [];
        let activeInfoWindow = null;
        let currentFilter = null;
        let currentSearchTerm = '';
        let favorites = JSON.parse(localStorage.getItem('restaurant_favorites') || '[]');
        
        // Á•ûÊ≥âÈßÖ„Åã„Çâ„ÅÆË∑ùÈõ¢„ÇíË®àÁÆóÔºàÁ∞°ÊòìË®àÁÆóÔºâ
        function calculateDistance(lat, lon) {
            const R = 6371; // Âú∞ÁêÉ„ÅÆÂçäÂæÑÔºàkmÔºâ
            const dLat = (lat - KAMISENU_LAT) * Math.PI / 180;
            const dLon = (lon - KAMISENU_LON) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(KAMISENU_LAT * Math.PI / 180) * Math.cos(lat * Math.PI / 180) *
                Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            const distance = R * c * 1000; // „É°„Éº„Éà„É´„Å´Â§âÊèõ
            return Math.round(distance);
        }

        // ‰æ°Ê†º„É¨„É≥„Ç∏„ÇíÊé®ÂÆö
        function estimatePriceRange(feature) {
            if (feature.includes('130ÂÜÜ') || feature.includes('100ÂÜÜ') || feature.includes('290ÂÜÜ') || feature.includes('„ÇÑ„Åô„ÅÜ„Åæ')) {
                return '¬• - ÊøÄÂÆâ';
            } else if (feature.includes('1500') || feature.includes('2000')) {
                return '¬•¬• - „É™„Éº„Ç∫„Éä„Éñ„É´';
            } else if (feature.includes('4000') || feature.includes('6000')) {
                return '¬•¬•¬• - ‰∏≠‰æ°Ê†º';
            } else if (feature.includes('„Åü„Åπ„É≠„Ç∞ÔºëÔºêÔºêÂêçÂ∫ó')) {
                return '¬•¬•¬•¬• - È´òÁ¥ö';
            }
            return '';
        }

        // „ÅäÊ∞ó„Å´ÂÖ•„ÇäÊ©üËÉΩ
        function toggleFavorite(restaurantName) {
            const index = favorites.indexOf(restaurantName);
            if (index === -1) {
                favorites.push(restaurantName);
            } else {
                favorites.splice(index, 1);
            }
            localStorage.setItem('restaurant_favorites', JSON.stringify(favorites));
            updateFavoriteButtons();
        }

        function updateFavoriteButtons() {
            document.querySelectorAll('.favorite-btn').forEach(btn => {
                const restaurantName = btn.dataset.restaurant;
                btn.classList.toggle('active', favorites.includes(restaurantName));
                btn.textContent = favorites.includes(restaurantName) ? '‚ù§Ô∏è' : 'ü§ç';
            });
        }
        
        // Ê§úÁ¥¢Ê©üËÉΩ
        function setupSearch() {
            const searchInput = document.getElementById('search-input');
            searchInput.addEventListener('input', (e) => {
                currentSearchTerm = e.target.value.toLowerCase();
                applyFilters();
            });
        }

        // „Éï„Ç£„É´„Çø„Éº„Å®Ê§úÁ¥¢„ÇíÈÅ©Áî®
        function applyFilters() {
            const filteredRestaurants = restaurants.filter(restaurant => {
                // „Ç´„ÉÜ„Ç¥„É™„Éï„Ç£„É´„Çø„Éº
                const categoryMatch = !currentFilter || restaurant.„Ç´„ÉÜ„Ç¥„É™ === currentFilter;
                
                // Ê§úÁ¥¢„Éï„Ç£„É´„Çø„Éº
                const searchMatch = !currentSearchTerm || 
                    restaurant.Â∫óÂêç.toLowerCase().includes(currentSearchTerm) ||
                    restaurant.ÁâπÂæ¥.toLowerCase().includes(currentSearchTerm) ||
                    restaurant.‰ΩèÊâÄ.toLowerCase().includes(currentSearchTerm) ||
                    restaurant.„Ç´„ÉÜ„Ç¥„É™.toLowerCase().includes(currentSearchTerm);
                
                return categoryMatch && searchMatch;
            });

            // „Éû„Éº„Ç´„Éº„ÅÆË°®Á§∫/ÈùûË°®Á§∫Ôºà„Éû„ÉÉ„Éó„ÅåÂà©Áî®ÂèØËÉΩ„Å™Â†¥Âêà„ÅÆ„ÅøÔºâ
            if (markers.length > 0) {
                markers.forEach((marker, index) => {
                    const restaurant = restaurants[index];
                    const shouldShow = filteredRestaurants.includes(restaurant);
                    marker.setVisible(shouldShow);
                });
            }

            // „É™„Çπ„Éà„ÇíÊõ¥Êñ∞
            displayRestaurantList(filteredRestaurants);
            updateStats(filteredRestaurants.length);
        }

        // Áµ±Ë®àÊÉÖÂ†±„ÇíÊõ¥Êñ∞
        function updateStats(count) {
            const statsText = document.getElementById('stats-text');
            statsText.textContent = `${count}‰ª∂„ÅÆ„É¨„Çπ„Éà„É©„É≥`;
        }
        function updateAPIStatus(message, isError = false) {
            const statusDiv = document.getElementById('api-status');
            statusDiv.textContent = message;
            if (isError) {
                statusDiv.style.backgroundColor = '#f8d7da';
                statusDiv.style.borderColor = '#f5c6cb';
                statusDiv.style.color = '#721c24';
            } else {
                statusDiv.style.backgroundColor = '#d4edda';
                statusDiv.style.borderColor = '#c3e6cb';
                statusDiv.style.color = '#155724';
            }
        }

        // API„Å™„Åó„Åß„ÇÇÂãï‰Ωú„Åô„ÇãÂàùÊúüÂåñ
        function initializeWithoutMap() {
            updateAPIStatus('‚ö†Ô∏è Google Maps API„ÅåÂà©Áî®„Åß„Åç„Åæ„Åõ„Çì„ÄÇ„É™„Çπ„ÉàË°®Á§∫„ÅÆ„Åø„ÅßÂãï‰Ωú„Åó„Åæ„Åô„ÄÇ', true);
            
            // „Éû„ÉÉ„Éó„Ç®„É™„Ç¢„Å´„É°„ÉÉ„Çª„Éº„Ç∏„ÇíË°®Á§∫
            document.getElementById('map').innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <h3>üó∫Ô∏è „Éû„ÉÉ„Éó„ÇíË°®Á§∫„Åô„Çã„Å´„ÅØ</h3>
                    <p>Google Maps API„Ç≠„Éº„ÅåÂøÖË¶Å„Åß„Åô</p>
                    <p>ÁèæÂú®„ÅØ„É¨„Çπ„Éà„É©„É≥„É™„Çπ„Éà„ÅÆ„Åø„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åë„Åæ„Åô</p>
                </div>
            `;
            
            // UIË¶ÅÁ¥†„ÇíÂàùÊúüÂåñ
            createLegend();
            createFilterOptions();
            setupSearch();
            displayRestaurantList();
            updateFavoriteButtons();
        }
        
        // Google Maps„ÅÆÂàùÊúüÂåñÔºàAPI„Ç≠„Éº„ÅåÊúâÂäπ„Å™Â†¥ÂêàÔºâ
        function initMap() {
            try {
                updateAPIStatus('‚úÖ Google Maps API„ÅÆË™≠„ÅøËæº„Åø„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü');
                
                // Á•ûÊ≥âÈßÖ„ÅÆÂ∫ßÊ®ô
                const kamisenuLatLng = { lat: KAMISENU_LAT, lng: KAMISENU_LON };
                
                // „Éû„ÉÉ„Éó„ÅÆ‰ΩúÊàê
                map = new google.maps.Map(document.getElementById('map'), {
                    center: kamisenuLatLng,
                    zoom: 17,
                    mapTypeControl: true,
                    fullscreenControl: true,
                    streetViewControl: true,
                    styles: [
                        {
                            featureType: "poi",
                            elementType: "labels",
                            stylers: [{ visibility: "off" }]
                        }
                    ]
                });
                
                // Á•ûÊ≥âÈßÖ„ÅÆ„Éû„Éº„Ç´„Éº
                new google.maps.Marker({
                    position: kamisenuLatLng,
                    map: map,
                    title: 'Á•ûÊ≥âÈßÖ',
                    icon: {
                        url: 'https://maps.google.com/mapfiles/ms/icons/blue-dot.png',
                        scaledSize: new google.maps.Size(40, 40)
                    },
                    zIndex: 1000
                });
                
                // ÊÉÖÂ†±„Ç¶„Ç£„É≥„Éâ„Ç¶„ÅÆÊ∫ñÂÇô
                const infoWindow = new google.maps.InfoWindow();
                
                // ÂêÑ„É¨„Çπ„Éà„É©„É≥„ÅÆ„Éû„Éº„Ç´„Éº„ÇíËøΩÂä†
                restaurants.forEach((restaurant, index) => {
                    // „Éû„Éº„Ç´„Éº„ÅÆ‰ΩçÁΩÆ
                    const position = { 
                        lat: restaurant.Á∑ØÂ∫¶, 
                        lng: restaurant.ÁµåÂ∫¶ 
                    };
                    
                    // „Ç´„ÉÜ„Ç¥„É™„ÅÆËâ≤„ÇíÂèñÂæó
                    const color = categoryColors[restaurant.„Ç´„ÉÜ„Ç¥„É™] || '#7f8c8d';
                    
                    // „Éû„Éº„Ç´„Éº„Çí‰ΩúÊàê
                    const marker = new google.maps.Marker({
                        position: position,
                        map: map,
                        title: restaurant.Â∫óÂêç,
                        label: {
                            text: restaurant.Â∫óÂêç.length > 6 ? restaurant.Â∫óÂêç.substring(0, 6) + '...' : restaurant.Â∫óÂêç,
                            color: 'white',
                            fontSize: '11px',
                            fontWeight: 'bold'
                        },
                        icon: {
                            path: google.maps.SymbolPath.CIRCLE,
                            fillColor: color,
                            fillOpacity: 0.9,
                            strokeWeight: 2,
                            strokeColor: '#ffffff',
                            scale: 15
                        },
                        restaurant: restaurant,
                        index: index
                    });
                    
                    // ÊÉÖÂ†±„Ç¶„Ç£„É≥„Éâ„Ç¶„ÅÆÂÜÖÂÆπ
                    let link = '';
                    if (restaurant.„Ç¢„Ç´„Ç¶„É≥„Éà && restaurant.„Ç¢„Ç´„Ç¶„É≥„Éà.startsWith('http')) {
                        link = `<a href="${restaurant.„Ç¢„Ç´„Ç¶„É≥„Éà}" target="_blank" style="color: #1976d2; text-decoration: none; font-weight: bold;">Ë©≥Á¥∞„ÇíË¶ã„Çã ‚Üí</a>`;
                    }
                    
                    const content = `
                        <div style="max-width: 320px; font-family: 'Hiragino Sans', sans-serif;">
                            <div style="font-weight: bold; font-size: 18px; margin-bottom: 8px; color: #333;">${restaurant.Â∫óÂêç}</div>
                            <div style="display: inline-block; padding: 4px 10px; border-radius: 15px; font-size: 12px; color: white; margin-bottom: 10px; font-weight: bold; background-color: ${color}">${restaurant.„Ç´„ÉÜ„Ç¥„É™}</div>
                            <div style="margin-bottom: 8px; color: #555; line-height: 1.4;"><strong>ÁâπÂæ¥:</strong> ${restaurant.ÁâπÂæ¥}</div>
                            <div style="font-size: 13px; color: #666; margin-bottom: 10px;"><strong>‰ΩèÊâÄ:</strong> ${restaurant.‰ΩèÊâÄ}</div>
                            ${link}
                        </div>
                    `;
                    
                    // „Éû„Éº„Ç´„Éº„ÇØ„É™„ÉÉ„ÇØ„ÅßÊÉÖÂ†±„Ç¶„Ç£„É≥„Éâ„Ç¶„ÇíË°®Á§∫
                    marker.addListener('click', () => {
                        if (activeInfoWindow) {
                            activeInfoWindow.close();
                        }
                        infoWindow.setContent(content);
                        infoWindow.open(map, marker);
                        activeInfoWindow = infoWindow;
                        
                        // „Çµ„Ç§„Éâ„Éê„Éº„ÅÆ„Ç¢„Ç§„ÉÜ„É†„Çí„Éè„Ç§„É©„Ç§„Éà
                        highlightListItem(index);
                    });
                    
                    markers.push(marker);
                });
                
                // UIË¶ÅÁ¥†„ÇíÂàùÊúüÂåñ
                createLegend();
                createFilterOptions();
                setupSearch();
                displayRestaurantList();
                updateFavoriteButtons();
                
                // APIË™≠„ÅøËæº„ÅøÂÆå‰∫ÜÂæå„ÅØÁä∂ÊÖã„Éê„Éº„ÇíÈö†„Åô
                setTimeout(() => {
                    document.getElementById('api-status').style.display = 'none';
                }, 3000);
                
            } catch (error) {
                console.error('Âú∞Âõ≥„ÅÆÂàùÊúüÂåñ„Å´Â§±Êïó:', error);
                initializeWithoutMap();
            }
        }
        
        // Âá°‰æã„Çí‰ΩúÊàê
        function createLegend() {
            const legendContent = document.getElementById('legend-content');
            const categories = Array.from(new Set(restaurants.map(r => r.„Ç´„ÉÜ„Ç¥„É™))).sort();
            
            categories.forEach(category => {
                const item = document.createElement('div');
                item.className = 'restaurant-item';
                item.dataset.index = realIndex;
                
                const color = categoryColors[restaurant.„Ç´„ÉÜ„Ç¥„É™];
                item.style.borderLeftColor = color;
                
                // URL„É™„É≥„ÇØ„ÅÆÂá¶ÁêÜ
                let linkHtml = '';
                if (restaurant.„Ç¢„Ç´„Ç¶„É≥„Éà && restaurant.„Ç¢„Ç´„Ç¶„É≥„Éà.startsWith('http')) {
                    // URL„ÅÆÁ®ÆÈ°û„ÇíÂà§ÂÆö
                    let linkText = 'Ë©≥Á¥∞„ÇíË¶ã„Çã';
                    if (restaurant.„Ç¢„Ç´„Ç¶„É≥„Éà.includes('instagram.com')) {
                        linkText = 'Instagram';
                    } else if (restaurant.„Ç¢„Ç´„Ç¶„É≥„Éà.includes('tabelog.com')) {
                        linkText = '„Åü„Åπ„É≠„Ç∞';
                    } else if (restaurant.„Ç¢„Ç´„Ç¶„É≥„Éà.includes('tamoiyanse.net')) {
                        linkText = 'ÂÖ¨Âºè„Çµ„Ç§„Éà';
                    } else if (restaurant.„Ç¢„Ç´„Ç¶„É≥„Éà.includes('sanbyakuya.com')) {
                        linkText = 'ÂÖ¨Âºè„Çµ„Ç§„Éà';
                    }
                    
                    linkHtml = `<div class="restaurant-link"><a href="${restaurant.„Ç¢„Ç´„Ç¶„É≥„Éà}" target="_blank">${linkText} ‚Üí</a></div>`;
                }
                
                item.innerHTML = `
                    <div class="restaurant-name">${restaurant.Â∫óÂêç}</div>
                    <div class="restaurant-category" style="background-color: ${color}">${restaurant.„Ç´„ÉÜ„Ç¥„É™}</div>
                    <div class="restaurant-feature">${restaurant.ÁâπÂæ¥}</div>
                    <div class="restaurant-address">${restaurant.‰ΩèÊâÄ}</div>
                    ${linkHtml}
                `;
                
                // „ÇØ„É™„ÉÉ„ÇØ„Ç§„Éô„É≥„ÉàÔºà„É™„É≥„ÇØ‰ª•Â§ñ„ÅÆÈÉ®ÂàÜ„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„ÅüÂ†¥ÂêàÔºâ
                item.addEventListener('click', (e) => {
                    // „É™„É≥„ÇØ„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„ÅüÂ†¥Âêà„ÅØÂú∞Âõ≥ÁßªÂãï„Åó„Å™„ÅÑ
                    if (e.target.tagName === 'A') {
                        return;
                    }
                    
                    // „Éû„ÉÉ„Éó„ÅåÂà©Áî®ÂèØËÉΩ„Å™Â†¥Âêà„ÅÆ„ÅøÂú∞Âõ≥Êìç‰Ωú
                    if (map && markers[realIndex]) {
                        const marker = markers[realIndex];
                        
                        // „Éû„ÉÉ„Éó„ÇíË©≤ÂΩì‰ΩçÁΩÆ„Å´ÁßªÂãï
                        map.setCenter(marker.getPosition());
                        map.setZoom(18);
                        
                        // „Éû„Éº„Ç´„Éº„Çí„ÇØ„É™„ÉÉ„ÇØ
                        google.maps.event.trigger(marker, 'click');
                    } else {
                        // „Éû„ÉÉ„Éó„ÅåÂà©Áî®„Åß„Åç„Å™„ÅÑÂ†¥Âêà„ÅØ„Éè„Ç§„É©„Ç§„Éà„ÅÆ„Åø
                        highlightListItem(realIndex);
                    }
                });
                
                list.appendChild(item);
            });
        }
        
        // „É™„Çπ„Éà„Ç¢„Ç§„ÉÜ„É†„Çí„Éè„Ç§„É©„Ç§„Éà
        function highlightListItem(index) {
            const items = document.querySelectorAll('.restaurant-item');
            items.forEach(item => {
                item.classList.remove('highlighted');
            });
            
            const selectedItem = document.querySelector(`.restaurant-item[data-index="${index}"]`);
            if (selectedItem) {
                selectedItem.classList.add('highlighted');
                selectedItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }
        
        // „É¨„Çπ„Éà„É©„É≥„Çí„Éï„Ç£„É´„Çø„É™„É≥„Ç∞ÔºàÂæåÊñπ‰∫íÊèõÊÄß„ÅÆ„Åü„ÇÅÊÆã„ÅôÔºâ
        function filterRestaurants(category) {
            currentFilter = category;
            applyFilters();
        }
        
        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂÆå‰∫ÜÊôÇ„ÅÆÂá¶ÁêÜ
        document.addEventListener('DOMContentLoaded', function() {
            // Google Maps API„ÅåÂà©Áî®„Åß„Åç„Å™„ÅÑÂ†¥Âêà„ÅÆÂàùÊúüÂåñ
            setTimeout(() => {
                if (typeof google === 'undefined' || !google.maps) {
                    initializeWithoutMap();
                }
            }, 5000); // 5ÁßíÂæÖ„Å£„Å¶„ÇÇGoogle Maps„ÅåË™≠„ÅøËæº„Åæ„Çå„Å™„ÅÑÂ†¥Âêà
        });
        
        // „Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞
        window.addEventListener('error', function(e) {
            console.error('„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü:', e.error);
            if (e.error && e.error.message && e.error.message.includes('Google')) {
                updateAPIStatus('‚ùå Google Maps API„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ„É™„Çπ„ÉàË°®Á§∫„ÅÆ„Åø„ÅßÂãï‰Ωú„Åó„Åæ„Åô„ÄÇ', true);
                initializeWithoutMap();
            }
        });

        // Google Maps APIË™≠„ÅøËæº„ÅøÂ§±ÊïóÊôÇ„ÅÆ„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ
        window.gm_authFailure = function() {
            updateAPIStatus('‚ùå Google Maps API„Ç≠„Éº„ÅåÁÑ°Âäπ„Åß„Åô„ÄÇ„É™„Çπ„ÉàË°®Á§∫„ÅÆ„Åø„ÅßÂãï‰Ωú„Åó„Åæ„Åô„ÄÇ', true);
            initializeWithoutMap();
        };
    </script>
    
    <!-- Google Maps API -->
    <script>
        // API„Ç≠„Éº„ÅÆÁ¢∫Ë™ç„Å®„Çπ„ÇØ„É™„Éó„ÉàË™≠„ÅøËæº„Åø
        (function() {
            const apiKey = 'AIzaSyDt7st4XdGITgULoo9Xpr4DzdRNEeiJ6Xk'; // ÂÖÉ„ÅÆAPI„Ç≠„Éº
            
            if (!apiKey || apiKey === 'YOUR_API_KEY') {
                // API„Ç≠„Éº„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà
                updateAPIStatus('‚ö†Ô∏è Google Maps API„Ç≠„Éº„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ„É™„Çπ„ÉàË°®Á§∫„ÅÆ„Åø„ÅßÂãï‰Ωú„Åó„Åæ„Åô„ÄÇ', true);
                initializeWithoutMap();
            } else {
                // API„Ç≠„Éº„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØGoogle Maps API„ÇíË™≠„ÅøËæº„Åø
                const script = document.createElement('script');
                script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=initMap`;
                script.async = true;
                script.defer = true;
                
                script.onerror = function() {
                    updateAPIStatus('‚ùå Google Maps API„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÊé•Á∂ö„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ', true);
                    initializeWithoutMap();
                };
                
                document.head.appendChild(script);
            }
        })();
    </script>
</body>
</html>'legend-item';
                
                const colorDiv = document.createElement('div');
                colorDiv.className = 'legend-color';
                colorDiv.style.backgroundColor = categoryColors[category];
                
                const nameSpan = document.createElement('span');
                nameSpan.textContent = category;
                
                item.appendChild(colorDiv);
                item.appendChild(nameSpan);
                legendContent.appendChild(item);
            });
        }
        
        // „Éï„Ç£„É´„Çø„Éº„Ç™„Éó„Ç∑„Éß„É≥„Çí‰ΩúÊàê
        function createFilterOptions() {
            const filterOptions = document.getElementById('filter-options');
            const categories = ['„Åô„Åπ„Å¶', ...Array.from(new Set(restaurants.map(r => r.„Ç´„ÉÜ„Ç¥„É™))).sort()];
            
            categories.forEach(category => {
                const button = document.createElement('button');
                button.className = 'filter-option';
                if (category === '„Åô„Åπ„Å¶') {
                    button.classList.add('active');
                }
                button.textContent = category;
                
                button.addEventListener('click', () => {
                    document.querySelectorAll('.filter-option').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    button.classList.add('active');
                    
                    currentFilter = category === '„Åô„Åπ„Å¶' ? null : category;
                    applyFilters();
                });
                
                filterOptions.appendChild(button);
            });
        }
        
        // „É¨„Çπ„Éà„É©„É≥„É™„Çπ„Éà„ÇíË°®Á§∫
        function displayRestaurantList(filter = null) {
            const list = document.getElementById('restaurant-list');
            list.innerHTML = '';
            
            const filteredRestaurants = filter 
                ? restaurants.filter(r => r.„Ç´„ÉÜ„Ç¥„É™ === filter) 
                : restaurants;
            
            filteredRestaurants.forEach((restaurant, originalIndex) => {
                const realIndex = restaurants.indexOf(restaurant);
                const item = document.createElement('div');
                item.className =
